import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Cours 16

# Introduction √† la virtualisation VMware

* * *

## Vue d'ensemble : VMware versus Proxmox

**<span class="fonttaller">Rappel Proxmox (Ce que vous connaissez d√©j√†)</span>**

Avec Proxmox, vous avez travaill√© avec une solution **tout-en-un**:

- Interface web unique
- Gestion de *VMs* et de conteneurs
- Clustering int√©gr√©
- Stockage distribu√© (Ceph)
- Sauvegarde incluse
- Solution *open-source* ü•≥

**<span class="fonttaller">L'approche VMware : la modularit√© üß©</span>**

VMware fonctionne diff√©remment avec une approche **modulaire et stratifi√©e (par couche):**

- Plusieurs produits sp√©cialis√©s
- Architecture en couches (hyperviseur + gestion + services)
- Chaque produit √† un r√¥le pr√©cis (et un co√ªt üòí...)
- √âcosyst√®me propri√©taire avec licences distinctes üí∞

On pourrait voir Proxmox comme un petit couteau suisse. Il comporte plusieurs outils pratiques et nous permet de se d√©brouiller tr√®s tr√®s bien. VMware est plut√¥t comme une v√©ritable bo√Æte √† outils professionnelle. Chaque outil excelle dans sa fonction, mais c'est un peu plus lourd comme infrastructure √† mettre en place.

## L'Hyperviseur : ESXi (la fondation) üß±

### Qu'est-ce que ESXI ?

C'est l'hyperviseur de type 1 (*bare-metal*) de VMware. C'est l'√©quivalent de l'hyperviseur int√©gr√© dans Proxmox (*qemu*).

**<span class="fonttaller">Caract√©ristiques cl√©s:</span>**

- S'installe directement sur le serveur physique
- Interface web minimale
- Empreinte tr√®s l√©g√®re (~300 MO)
- G√®re les ressources mat√©rielles (CPU,RAM,disques,r√©seau)
- Ex√©cute les machines virtuelles

### Comparaison avec Proxmox

|Aspect|Proxmox|ESXi|
|------|-------|----|
|Base Linux|Oui (Debian)|Non (VMkernel propri√©taire)|
|Conteneurs|Oui (LXC)|Non (VM seulement)|
|Gestion locale|Interface web compl√®te|Interface basique|
|Clustering|Int√©gr√©|N√©cessite vCenter üíµüíµüíµ|

### Quand utiliser ESXi seul ?

- Laboratoire personnel: Pour vous amuser: *homelab, tests, etc*
- Petit environnement: 1-3 serveurs sans besoin de gestion centralis√©
- Apprentissage: Comprendre la base avant d'utiliser vCenter

:::caution[Limitations importantes]
ESXi seul ne permet PAS le clustering, la migration √† chaud (vMotion), ou la haute disponibilit√©. Pour ces fonctionnalit√©s, vous avez besoin de vCenter. Tous ces beaux produits sont √©videmment payants.
:::

## Le gestionnaire centralis√© : vCenter Server üìä

### Qu'est-ce que vCenter

**vCenter Server** est le cerveau de l'infrastructure VMware. C'est la plateforme de gestion centralis√©e qui orchestre plusieurs h√¥tes ESXi. C'est un peu comme le cluster manager de Proxmox, mais bien plus puissant et s√©par√© de l'hyperviseur.

### Architecture de d√©ploiement

vCenter peut √™tre d√©ploy√© de deux fa√ßons:

1. **vCSA (vCenter Server Appliance)** - Recommand√©
    - VM pr√©configur√©e sous Linux (Photon OS)
    - D√©ploiement rapide (format OVA)
    - Base de donn√©es PostgreSQL int√©gr√©e
    - Pas de Windows requis


2. **vCenter sur Windows** - D√©pr√©ci√©
    - Installation sur Windows Serveur
    - N√©cessite SQL Server ou Oracle
    - Plus complexe √† maintenir
    - En voie de disparition

### Fonctionnalit√©s principales de vCenter

**<span class="fonttaller green-text">Gestion centralis√©e</span>**

- **Interface unique** pour g√©rer des dizaines ou centaines d'h√¥tes ESXi
- **Inventaire hi√©rarchique** : Datacenter ‚Üí Cluster ‚Üí H√¥te ‚Üí VM
- **Recherche globale**: Trouver n'importe quelle ressource rapidement
- **Gestion par lots**: Op√©rations sur plusieurs *VMs* simultan√©ment

**<span class="fonttaller green-text">Clustering et Haute-Disponibilit√©</span>**

- **vSphere HA**: Red√©marrage automatique des *VMs* en cas de panne d'h√¥te
- **vSphere DRS**: Distribution automatique des la charge entre les h√¥tes
- **vMotion**: Migration √† chaud des *VMs* sans interruption
- **Storage vMotion**: Migration du stockage sans arr√™t

**<span class="fonttaller green-text">Fonctionnalit√©s avanc√©es</span>**

- **Templates**: Mod√®les de VM standardis√©s
- **Content Library**: Bibiloth√®que centralis√©e de *templates* et *ISOs*
- **R√¥les et permissions**: Gestion fine des acc√®s (RBAC)
- **Alarmes et monitoring**: Surveillance proactive
- **Update manager**: Gestin des MAJ ESXi

## Le stockage : Comprendre les options üíæ

Contrairement √† Proxmox qui int√®gre Ceph, VMware propose plusieurs approches:

**<span class="fonttaller">VMFS (VMware File System)</span>**

- **Type:** Syst√®me de fichiers propri√©taire de VMware
- **Usage:** Stockage partag√© classique (SAN,iSCSI)
- **Particularit√©:** Clustering des fichiers
- **Comparatif:** Ce serait l'√©quivalent d'un LVM sur un stockage partag√© avec Proxmox

**<span class="fonttaller">NFS</span>**

- **Type:** Protocole standard et connu
- **Usage:** Connexion √† des NAS
- **Particularit√©:** Simple, flexible, *thin provisionning* natif
- **Comparatif:** NFS est utilisable de la m√™me fa√ßon avec Proxmox

**<span class="fonttaller">vSAN</span>**

- **Type:** Stockage distribu√© d√©fini par logiciel
- **Usage:** Aggr√©gation des disques locaux de plusieurs h√¥tes
- **Particularit√©:** Cr√©√© un *datastore* partag√© √† partir de ressources locales
- **Comparatif:** C'est l'√©quivalent de Ceph!
- **Licence:** vSAN n'est pas inclus dans vCenter... √©videmment üíµüíµüíµ
- **Pr√©alables:** 3 h√¥tes ESXi (comme Ceph)

**<span class="fonttaller">Local Datastore</span>**
- **Type:** Disques locaux sur un h√¥te ESXi
- **Usage:** VM non critiques, lab, pas de haute disponibilit√©
- **Limitation:** Pas de vMotion possible (migration)

### Quelle solution de stockage choisir ?

|Sc√©nario|Solution recommand√©e|Pourquoi|
|--------|--------------------|--------|
|Infrastructure existante avec SAN|VMFS sur SAN|Utilise l'infra. en place. Performant.|
|NAS en place|NFS|Simple √©conomique (mais lent)|
|Infrastructure moderne sans SAN|vSAN|Stockage distribu√©. R√©silient.|
|Lab/Test sur un seul h√¥te|Local Datastore|Pas de co√ªt additionnel.|

## Quelques produits compl√©mentaires de VMware

