import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Cours 3

## Prise en main de Proxmox

Au dernier cours, nous avons analysÃ© ensemble les diffÃ©rentes composantes qui constituaient un hyperviseur tel que Proxmox. Aujourd'hui, nous nous attarderons un peu plus Ã  la prise en main de Proxmox. Autrement dit, une fois que l'hyperviseur est installÃ©, il nous faut l'initialiser correctement.

## Vue d'ensemble de l'interface

L'interface web de Proxmox suit un modÃ¨le dÃ©coupÃ© en trois panneaux:

- **Panneau de gauche:** Arborescence des ressources
- **Panneau central:** Contenu principal et onglets
- **Panneau en bas:** Journaux rÃ©cents

![Interface](../Assets/03/Interface.png)

### Arborescence des ressources ğŸŒ³

L'arborescence des ressources est une structure hiÃ©rarchique pouvant contenir diffÃ©rents Ã©lÃ©ments:

#### Datacenter (centre de donnÃ©es) ğŸ¢

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="5">Point central de gestion de toute l'infrastructure.</td>
        <td>1. Configure les paramÃ¨tres globaux qui s'appliquent Ã  tous les nÅ“uds</td>
    </tr>
    <tr>
        <td>2. GÃ¨re les utilisateurs et leurs permissions d'accÃ¨s</td>
    </tr>
    <tr>
        <td>3. DÃ©finit les politiques de sauvegarde pour toutes les VMs</td>
    </tr>
    <tr>
        <td>4. Coordonne les clusters (groupes de serveurs)</td>
    </tr>
    <tr>
        <td>5. Centralise la surveillance et les alertes</td>
    </tr>
</table>

**<mark>Sans le *datacenter*, il est impossible de gÃ©rer plusieurs serveurs ensemble ou de partager des ressources entre eux.</mark>**

#### Noeuds (serveurs physiques) ğŸª¢

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Machines physiques qui hÃ©bergent les *VMs* et les conteneurs.</td>
        <td>1. Fournissent les ressources matÃ©rielles (CPU, RAM, Stockage).</td>
    </tr>
    <tr>
        <td>2. ExÃ©cutent l'hyperviseur.</td>
    </tr>
    <tr>
        <td>3. Communiquent entre eux lorsqu'ils sont en cluster.</td>
    </tr>
    <tr>
        <td>4. GÃ¨rent localement leurs *VMs* et conteneurs.</td>
    </tr>
</table>

#### *VMs* (machines virtuelles) ğŸ’»

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Ordinateurs virtuels complets avec leur propre systÃ¨me d'exploitation</td>
        <td>1. Ã‰mulent un ordinateur physique complet</td>
    </tr>
    <tr>
        <td>2. PossÃ¨dent leur BIOS/UEFI, disque dur virtuel, carte rÃ©seau virtuelle, etc.</td>
    </tr>
    <tr>
        <td>3. Peuvent faire tourner leur propre systÃ¨me d'exploitation.</td>
    </tr>
    <tr>
        <td>4. IsolÃ©es les unes des autres.</td>
    </tr>
</table>

#### Conteneurs LXC ğŸ“¦

<table>
    <tr>
        <th>RÃ´le</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Environnements lÃ©gers partageant le noyau du systÃ¨me hÃ´te</td>
        <td>Consomment moins de ressources que les *VMs* standards</td>
    </tr>
    <tr>
        <td>DÃ©marrent plus rapidement</td>
    </tr>
    <tr>
        <td>Partagent le noyaux Linux de Proxmox (l'hÃ´te)</td>
    </tr>
    <tr>
        <td>IdÃ©aux pour les applications Linux</td>
    </tr>
</table>

:::caution[LXC â‰  DOCKER]
Les conteneurs LXC ne sont pas identiques aux conteneurs Docker dont nous parlerons un peu plus tard dans le cours. Ne faites pas l'erreur de les confondre. Le niveau de conteneurisation n'est pas le mÃªme. Nous aurons l'occasion d'en reparler, mais en attendant, sachez les distinguer.
:::

#### Stockages ğŸ’¾

**RÃ´le:** Espaces de stockage oÃ¹ sont conservÃ©es les donnÃ©es

**Fonctions:**

- Stockent les disques durs virtuels des *VMs*
- Conservent les sauvegardes et les *snapshots*
- Peuvent Ãªtre locaux ou partagÃ©s
- GÃ¨rent la rÃ©plication des donnÃ©es

**Types courants:**

- **Local:** Disque dur du serveur
- **NFS:** Stockage rÃ©seau partagÃ©
- **iSCSI:** Stockage SAN professionnel
- **Ceph:** Stockage distribuÃ© haute disponibilitÃ©

#### RÃ©seaux (*Localnetwork*) ğŸ›œ

**RÃ´le:** Interfaces et segments rÃ©seau configurÃ©s sur le noeud

**Fonctions:**

- DÃ©finissent la connectivitÃ© rÃ©seau des *VMs* et conteneurs
- GÃ¨rent les VLANs et la segmentation rÃ©seau
- ContrÃ´lent l'accÃ¨s internet et inter-VMs
- Configurent les ponts (*bridges*) rÃ©seau

**Types de rÃ©seaux:**

- **vmbr0, vmbr1...:** Ponts rÃ©seau principaux (bridges)
- **Local network :** RÃ©seau local du datacenter
- **VLAN networks :** RÃ©seaux segmentÃ©s par VLAN
- **SDN (Software Defined Network):** RÃ©seaux virtuels avancÃ©s

<div style={{textAlign: 'center'}}>
    ![ProxmoxContent](../Assets/03/ProxmoxContent.png)
</div>

### Le panneau central ğŸ“Š

Le panneau central diffÃ¨re dÃ©pendemment de l'Ã©lÃ©ment de la structure hiÃ©rarchique sÃ©lectionnÃ©.

#### Niveau Datacenter - Gestion globale

**RÃ´le:** Tableau de bord gÃ©nÃ©ral de l'infrastructure. Il offre une vision d'ensemble et permet de surveiller la charge de travail.

- Statistiques globales: nombre de *VMs*, conteneurs, noeuds
- Utilisation des ressources totales (CPU, RAM, Stockage)
- Graphiques de performance consolidÃ©s
- Ã‰tat de santÃ© global du cluster

**Quelques sections Ã  connaitre dÃ¨s maintenant:** 

1ï¸âƒ£ **Notes: Documentation centralisÃ©e** ğŸ‘‡
    - Notes sur la configuration du serveur
    - ProcÃ©dures de maintenance
    - Contacts et informations importantes
    - Historique des changements majeurs

2ï¸âƒ£ **Cluster: Coordination des noeuds** ğŸ‘‡
    - Ajouter/retirer des noeuds au cluster
    - GÃ©rer la haute disponibilitÃ© (HA)
    - Synchroniser les configurations
    - Ã‰lection du noeud maÃ®tre

3ï¸âƒ£ **Stockage: Configuration centralisÃ©e des espaces de stockage** ğŸ‘‡
    - Ajout de nouveaux stockages (NFS, iSCSI, Ceph)
    - Configuration des permissions d'accÃ¨s
    - DÃ©finition des types de contenu (images, sauvegardes, ISO)
    - Monitoring de l'espace disponible

4ï¸âƒ£ **Sauvegardes: Planification automatisÃ©e des backups** ğŸ‘‡
    - CrÃ©ation de tÃ¢ches de sauvegarde rÃ©currentes
    - SÃ©lection des VMs/conteneurs Ã  sauvegarder
    - Configuration de la rÃ©tention (combien de backups garder)
    - Notification en cas d'Ã©chec

5ï¸âƒ£ **Permissions: ContrÃ´le d'accÃ¨s et sÃ©curitÃ©** ğŸ‘‡
    - CrÃ©ation d'utilisateurs et groupes
    - Attribution de rÃ´les (administrateur, utilisateur, lecture seule)
    - DÃ©finition des permissions sur les ressources
    - Configuration de l'authentification (LDAP, Active Directory)

![PanneauCentralDataCenter](../Assets/03/PanneauCentralDataCenter.png)


