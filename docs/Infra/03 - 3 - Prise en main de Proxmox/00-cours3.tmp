import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Cours 3

## Prise en main de Proxmox

Au dernier cours, nous avons analysé ensemble les différentes composantes qui constituaient un hyperviseur tel que Proxmox. Aujourd'hui, nous nous attarderons un peu plus à la prise en main de Proxmox. Autrement dit, une fois que l'hyperviseur est installé, il nous faut l'initialiser correctement.

## Vue d'ensemble de l'interface

L'interface web de Proxmox suit un modèle découpé en trois panneaux:

- **Panneau de gauche:** Arborescence des ressources
- **Panneau central:** Contenu principal et onglets
- **Panneau en bas:** Journaux récents

![Interface](../Assets/03/Interface.png)

### Arborescence des ressources 🌳

L'arborescence des ressources est une structure hiérarchique pouvant contenir différents éléments:

#### Datacenter (centre de données) 🏢

<table>
    <tr>
        <th>Rôle</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="5">Point central de gestion de toute l'infrastructure.</td>
        <td>1. Configure les paramètres globaux qui s'appliquent à tous les nœuds</td>
    </tr>
    <tr>
        <td>2. Gère les utilisateurs et leurs permissions d'accès</td>
    </tr>
    <tr>
        <td>3. Définit les politiques de sauvegarde pour toutes les VMs</td>
    </tr>
    <tr>
        <td>4. Coordonne les clusters (groupes de serveurs)</td>
    </tr>
    <tr>
        <td>5. Centralise la surveillance et les alertes</td>
    </tr>
</table>

**<mark>Sans le *datacenter*, il est impossible de gérer plusieurs serveurs ensemble ou de partager des ressources entre eux.</mark>**

#### Noeuds (serveurs physiques) 🪢

<table>
    <tr>
        <th>Rôle</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Machines physiques qui hébergent les *VMs* et les conteneurs.</td>
        <td>1. Fournissent les ressources matérielles (CPU, RAM, Stockage).</td>
    </tr>
    <tr>
        <td>2. Exécutent l'hyperviseur.</td>
    </tr>
    <tr>
        <td>3. Communiquent entre eux lorsqu'ils sont en cluster.</td>
    </tr>
    <tr>
        <td>4. Gèrent localement leurs *VMs* et conteneurs.</td>
    </tr>
</table>

#### *VMs* (machines virtuelles) 💻

<table>
    <tr>
        <th>Rôle</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Ordinateurs virtuels complets avec leur propre système d'exploitation</td>
        <td>1. Émulent un ordinateur physique complet</td>
    </tr>
    <tr>
        <td>2. Possèdent leur BIOS/UEFI, disque dur virtuel, carte réseau virtuelle, etc.</td>
    </tr>
    <tr>
        <td>3. Peuvent faire tourner leur propre système d'exploitation.</td>
    </tr>
    <tr>
        <td>4. Isolées les unes des autres.</td>
    </tr>
</table>

#### Conteneurs LXC 📦

<table>
    <tr>
        <th>Rôle</th>
        <th>Fonctions</th>
    </tr>
    <tr>
        <td rowspan="4">Environnements légers partageant le noyau du système hôte</td>
        <td>Consomment moins de ressources que les *VMs* standards</td>
    </tr>
    <tr>
        <td>Démarrent plus rapidement</td>
    </tr>
    <tr>
        <td>Partagent le noyaux Linux de Proxmox (l'hôte)</td>
    </tr>
    <tr>
        <td>Idéaux pour les applications Linux</td>
    </tr>
</table>

:::caution[LXC ≠ DOCKER]
Les conteneurs LXC ne sont pas identiques aux conteneurs Docker dont nous parlerons un peu plus tard dans le cours. Ne faites pas l'erreur de les confondre. Le niveau de conteneurisation n'est pas le même. Nous aurons l'occasion d'en reparler, mais en attendant, sachez les distinguer.
:::

#### Stockages 💾

**Rôle:** Espaces de stockage où sont conservées les données

**Fonctions:**

- Stockent les disques durs virtuels des *VMs*
- Conservent les sauvegardes et les *snapshots*
- Peuvent être locaux ou partagés
- Gèrent la réplication des données

**Types courants:**

- **Local:** Disque dur du serveur
- **NFS:** Stockage réseau partagé
- **iSCSI:** Stockage SAN professionnel
- **Ceph:** Stockage distribué haute disponibilité

#### Réseaux (*Localnetwork*) 🛜

**Rôle:** Interfaces et segments réseau configurés sur le noeud

**Fonctions:**

- Définissent la connectivité réseau des *VMs* et conteneurs
- Gèrent les VLANs et la segmentation réseau
- Contrôlent l'accès internet et inter-VMs
- Configurent les ponts (*bridges*) réseau

**Types de réseaux:**

- **vmbr0, vmbr1...:** Ponts réseau principaux (bridges)
- **Local network :** Réseau local du datacenter
- **VLAN networks :** Réseaux segmentés par VLAN
- **SDN (Software Defined Network):** Réseaux virtuels avancés

<div style={{textAlign: 'center'}}>
    ![ProxmoxContent](../Assets/03/ProxmoxContent.png)
</div>

### Le panneau central 📊

Le panneau central diffère dépendemment de l'élément de la structure hiérarchique sélectionné.

#### Niveau Datacenter - Gestion globale

**Rôle:** Tableau de bord général de l'infrastructure. Il offre une vision d'ensemble et permet de surveiller la charge de travail.

- Statistiques globales: nombre de *VMs*, conteneurs, noeuds
- Utilisation des ressources totales (CPU, RAM, Stockage)
- Graphiques de performance consolidés
- État de santé global du cluster

**Quelques sections à connaitre dès maintenant:** 

1️⃣ **Notes: Documentation centralisée** 👇
    - Notes sur la configuration du serveur
    - Procédures de maintenance
    - Contacts et informations importantes
    - Historique des changements majeurs

2️⃣ **Cluster: Coordination des noeuds** 👇
    - Ajouter/retirer des noeuds au cluster
    - Gérer la haute disponibilité (HA)
    - Synchroniser les configurations
    - Élection du noeud maître

3️⃣ **Stockage: Configuration centralisée des espaces de stockage** 👇
    - Ajout de nouveaux stockages (NFS, iSCSI, Ceph)
    - Configuration des permissions d'accès
    - Définition des types de contenu (images, sauvegardes, ISO)
    - Monitoring de l'espace disponible

4️⃣ **Sauvegardes: Planification automatisée des backups** 👇
    - Création de tâches de sauvegarde récurrentes
    - Sélection des VMs/conteneurs à sauvegarder
    - Configuration de la rétention (combien de backups garder)
    - Notification en cas d'échec

5️⃣ **Permissions: Contrôle d'accès et sécurité** 👇
    - Création d'utilisateurs et groupes
    - Attribution de rôles (administrateur, utilisateur, lecture seule)
    - Définition des permissions sur les ressources
    - Configuration de l'authentification (LDAP, Active Directory)

![PanneauCentralDataCenter](../Assets/03/PanneauCentralDataCenter.png)


