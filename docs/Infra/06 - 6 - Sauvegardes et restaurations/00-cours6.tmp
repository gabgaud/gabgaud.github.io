import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Cours 6

## Sauvegardes et restaurations üíæ

Les sauvegardes constituent un √©l√©ment fondamental de tout d√©ploiement informatique s√©rieux. Dans l'environnement de virtualisation Proxmox VE, la sauvegarde devient encore plus critique car elle prot√®ge non seulement les donn√©es, mais √©galement l'infrastructure virtuelle compl√®te.

<span class="green-text fonttaller">**Pourquoi sauvegarder dans un environnement virtualis√© ?**</span><br/><br/>

- Protection contre les pannes mat√©rielles du serveur h√¥te
- R√©cup√©ration rapide apr√®s une corruption de donn√©es
- Migration vers de nouveaux √©quipements
- Tests et d√©veloppement sur des copies exactes de production
- Conformit√© aux politiques de s√©curit√© informatique

### Caract√©ristiques du syst√®me de sauvegarde Proxmox VE

Proxmox VE offre une solution de sauvegarde compl√®tement int√©gr√©e qui pr√©sente plusieurs avantages distinctifs :

<span class="green-text fonttaller">**Sauvegardes compl√®tes uniquement:**</span><br/><br/>

- Chaque sauvegarde contient l'int√©gralit√© de la machine virtuelle ou du conteneur
- Inclut automatiquement la configuration de la VM/CT et toutes les donn√©es
- Pas de gestion complexe de sauvegardes incr√©mentales ou diff√©rentielles
- Simplicit√© de restauration : une seule archive suffit

<span class="green-text fonttaller">**Int√©gration native:**</span><br/><br/>

- Utilise les capacit√©s sp√©cifiques de chaque type de stockage
- S'adapte aux diff√©rents types de syst√®mes invit√©s (VM et conteneurs)
- Interface graphique et ligne de commande disponibles
- Gestion centralis√©e depuis l'interface web

## Architecture et stockage des sauvegardes

### Types de stockage pour les sauvegardes

Avant de pouvoir effectuer une sauvegarde, il est imp√©ratif de configurer un stockage de sauvegarde. Proxmox VE supporte deux approches principales :

#### Proxmox Backup Server 

Le Proxmox Backup Server repr√©sente la solution la plus avanc√©e :

<span class="green-text">**Avantages techniques:**</span><br/><br/>

- **D√©duplication de donn√©es :** Les blocs identiques ne sont stock√©s qu'une seule fois, √©conomisant consid√©rablement l'espace
- **Stockage des m√©tadonn√©es :** Les informations de structure sont s√©par√©es des donn√©es
- **Chiffrement c√¥t√© client :** S√©curit√© maximale des donn√©es sauvegard√©es
- **V√©rification d'int√©grit√© :** Contr√¥les automatiques de l'int√©grit√© des sauvegardes

<span class="green-text">**Mise en oeuvre recommand√©e:**</span><br/><br/>

- D√©ploiement sur un serveur d√©di√© pour optimiser les performances
- R√©seau haute vitesse entre Proxmox VE et le Backup Server
- Stockage local rapide sur le serveur de sauvegarde

#### Stockage de niveau fichier

Alternative plus simple utilisant des syst√®mes de fichiers classiques :

<span class="green-text">**Options disponibles:**</span><br/><br/>

- **NFS :** Solution r√©seau √©prouv√©e, facile √† mettre en ≈ìuvre
- **SMB/CIFS :** Compatible avec les environnements Windows
- **Stockage local :** Performance maximale mais pas de protection contre les pannes du serveur

<span class="green-text">**Consid√©rations pratiques:**</span><br/><br/>

- Les sauvegardes sont stock√©es comme des fichiers r√©guliers
- Possibilit√© de copie vers bande magn√©tique pour archivage hors site
- Gestion manuelle de l'espace disque n√©cessaire

### Nomenclature des fichiers de sauvegarde

Proxmox VE utilise une convention de nommage standardis√©e qui encode des informations importantes :

<span class="green-text">**Format standard:**</span><br/><br/>

```
vzdump-[type]-[vmid]-[date]-[heure].[extension]
```

<span class="green-text">**Exemple concret:**</span><br/><br/>

```
vzdump-lxc-105-2025_09_08-10_47_09.tar.gz
```

- `lxc`: Type de syst√®me (conteneur Linux)
- `105`: Identifiant num√©rique de la VM/conteneur
- `2025_09_08`: Date de cr√©ation (8 septembre 2025)
- `10_47_09`: Heure de cr√©ation (10:47:09)
- `.tar.gz`: Format et compression utilis√©s

<span class="green-text">**Avantages de cette nomenclature:**</span><br/><br/>
- Stockage multiple dans le m√™me r√©pertoire
- Identification rapide du contenu
- Tri chronologique automatique
- Compatibilit√© avec les scripts d'automatisation