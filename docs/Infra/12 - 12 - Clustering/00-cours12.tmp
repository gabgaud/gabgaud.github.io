import useBaseUrl from '@docusaurus/useBaseUrl';
import ThemedImage from '@theme/ThemedImage';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Cours 12

## Cluster Proxmox, pourquoi ? ğŸ¤”

En fait, pour comprendre pourquoi il est essentiel de crÃ©er un cluster Proxmox en entreprise, il suffit d'imaginer ce qui pourrait se produire si nous n'en avions pas. Imaginons, par exemple, un serveur Proxmox hÃ©bergeant 10 machines virtuelles. Sans cluster on risquerait:

- **Une panne matÃ©rielle** : Carte mÃ¨re grillÃ©e â†’ Plusieurs jours d'arrÃªt
- **Maintenance** : Mise Ã  jour du serveur â†’ Interruption de service
- **Saturation** : Plus de ressources â†’ Impossible d'ajouter des *VMs*
- **Erreur humaine** : Corruption du systÃ¨me â†’ DÃ©sastre

**<span class="fonttaller green-text">La solution : le cluster</span>**<br/>

Le *clustering*, c'est la crÃ©ation d'une Ã©quipe de serveurs qui travaillent ensemble en vue d'atteindre des objectifs communs. Cette faÃ§on de fonctionner comporte de nombreux avantages:

1. **Haute disponibilitÃ©:** Une *VM* redÃ©marre ailleurs si son serveur hÃ´te plante.
2. **Migration Ã  chaud:** DÃ©placer une *VM* sans l'arrÃªter
3. **Maintenance sans interruption:** RedÃ©marrer un serveur sans impact
4. **Gestion centralisÃ©e:** Un seul point d'administration
5. **Ã‰volutivitÃ©:** Ajouter des serveurs facilement

```
Cluster Proxmox
â”œâ”€â”€ Serveur 1 : VM 1, VM 4, VM 7
â”œâ”€â”€ Serveur 2 : VM 2, VM 5, VM 8
â””â”€â”€ Serveur 3 : VM 3, VM 6, VM 9

Si Serveur 1 tombe â†’ VMs redÃ©marrent automatiquement sur Serveur 2 ou 3 !
```

### Quand considÃ©rer le *clustering* ?

Vous DEVEZ considÃ©rer un *cluster* si:

- Vos applications ne peuvent pas s'arrÃªter (sites web, BDD critiques)
- Vous gÃ©rez plus de 5-10 VMs importantes
- Vous avez besoin de faire des maintenances sans interruption
- Votre entreprise dÃ©pend de ces VMs

## Qu'est-ce qu'un **cluster** ? ğŸš’

RÃ¨gle gÃ©nÃ©ral: J'aime bien les analogies. Ici, je vais vous comparer le *clustering* Ã  une Ã©quipe de pompiers. Imaginez si la caserne de votre ville ne contenait qu'un seul pompier:

- Il peut Ã©teindre qu'un seul feu Ã  la fois.
- Advenant qu'il soit malade, il n'y a personne pour intervenir.
- S'il est dÃ©jÃ  en intervention, il ne peut pas rÃ©pondre pour un autre urgence.
- Sa force physique est limitÃ©.

Maintenant, avec trois pompiers, on change la dynamique:

- Si un pompier est indisponible, un autre prend le relais.
- Ils peuvent gÃ©rer plus d'un incendie Ã  la fois.
- Ils se coordonnent par radio.
- Ils peuvent se partager de l'Ã©quipement.

**Le *clustering* c'est exactement Ã§a, mais dans le domaine des technologies de l'information:**

1. Les serveurs Proxmox communiquent entre eux via ce qu'on appelle un *heartbeat* toutes les secondes ğŸ’“. En gros les serveurs veillent les uns sur les autres pour s'assurer que tout le monde va bien.