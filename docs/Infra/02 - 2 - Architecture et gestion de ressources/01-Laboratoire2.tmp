# Laboratoire 2

* * *

## Installation de l'hyperviseur Proxmox

## Pr√©alables

- Avoir consult√© la th√©orie en lien avec ce cours.

## Objectifs

- Faire l'installation de l'hyperviseur Proxmox
- Naviguer √† travers l'interface, d√©couvrir les menus et les options.

## √âtapes de r√©alisation

Dans ce laboratoire, vous aurez l'occasion d'installer l'hyperviseur Proxmox. Pour l'instant, vous l'installerez dans une machine virtuelle ü§î

> *eummm...tu veux vraiment qu'on installe un hyperviseur en tant que machine virtuelle...!?!? Ce n'est pas un peu contre-productif ?*
>
> *-Les √©tudiants*

C'est effectivement contre-productif üòÜ, et ce n'est pas quelque chose que l'on fait normalement. L'objectif est simplement de vous faire exp√©rimenter l'installation et l'interface. Ne vous en faites pas, vous travaillerez avec de vrais serveurs dans la salle des √©quipements tr√®s bient√¥t.


### Cr√©ation de la machine virtuelle

La premi√®re √©tape consiste √† cr√©er la machine virtuelle sur laquelle vous installerez Proxmox. Dirigez-vous donc sur [labinfo](https://labinfo.cegepmontpetit.ca) et cr√©ez vous une machine virtuelle qui correspond aux sp√©cificit√©s suivantes:

- üßÆ **CPU:** 4
- üìù **M√©moire:** 16 Go
- üíæ **Stockage:** 120 Go
- üåê **R√©seau:** Acc√®s Internet

**<u>Proxmox est bas√© sur la distribution Debian de Linux.</u>** Cette information pourrait vous √™tre utile lors de la cr√©ation de votre *VM*.

:::caution
Dans une machine physique, il faudrait vous assurer d'activer la virtualisation mat√©rielle dans le UEFI/BIOS de votre serveur. La virtualisation mat√©rielle, c'est ni plus ni moins la technologie qui vous  Or, ici nous travaillons avec une machine virtuelle. Vous devez donc vous assurez d'activer la virtualisation mat√©rielle en cochant une option dans les param√®tres de votre machine virtuelle.

![VirtualisationMat√©rielle](../Assets/02/VirtualisationMat√©rielle.png)
:::

### Installation de Proxmox

Ins√©rez le m√©dia d'installation de Proxmox dans votre machine virtuelle. Vous le retrouverez dans **Logiciels** > **Linux** > **Proxmox** > **Proxmox-ve_8.2-2.iso**. D√©marrez ensuite votre *VM*.

#### √âtape 1

Vous serez alors amen√© √† choisir un type d'installation (via GUI ou Terminal). Pour ma part j'ai choisi le mode `terminal` pour l'√©conomie de ressources √† l'installation, mais dans tous les cas, l'installation est similaire.

![TerminalInstallation](../Assets/02/PromoxTerminalInstall.png)

#### √âtape 2

Une fois les conditions d'utilisation et d'installation accept√©s, vous devrez s√©lectionner le disque cible pour effectuer l'installation. Vous n'avez qu'un seul disque...le choix devrait √™tre relativement √©vident üòâ.

Par contre, j'attire votre attention sur le bouton `<Advanced Options>`. Dirigez-vous dans cette section et regardez les diff√©rentes options disponibles:

|Nom de l'option|Explications d√©taill√©es|Bonnes pratiques (valeurs optimales pour 120 Go)|
|---------------------|-------------------------------|-----------------------------------------------------------|
|**Filesystem**|Le syst√®me de fichiers d√©termine comment les donn√©es sont organis√©es sur le disque. `ext4` est un format classique, fiable et bien support√© par Linux.| Choisir `ext4` pour sa simplicit√© et sa compatibilit√©. √âviter `zfs` ou `btrfs` sauf si vous avez des besoins sp√©cifiques (Nous y reviendrons)|
|**Total size**|C‚Äôest la taille totale du disque dur utilis√© pour installer Proxmox.|Ici, le disque fait `120 Go`. Assurez-vous que le disque est d√©di√© √† Proxmox pour √©viter les conflits avec d'autres syst√®mes.|
|**Swap size**|Le swap est une zone du disque utilis√©e comme extension de la m√©moire RAM quand celle-ci est satur√©e.|Mettre `8 Go` si vous avez entre 8 et 16 Go de RAM. Cela aide √† √©viter les plantages si la m√©moire est pleine.|
|**Maximum root volume size**|C‚Äôest l‚Äôespace r√©serv√© pour le syst√®me Proxmox lui-m√™me (fichiers syst√®me, journaux, etc.).|`16 Go` suffisent pour le syst√®me. Ne pas trop allouer ici pour garder de la place pour les machines virtuelles.|
|**Maximum data volume size**| C‚Äôest l‚Äôespace utilis√© pour stocker les machines virtuelles (VM), conteneurs et leurs donn√©es.| Allouer `90 Go` pour les VM et conteneurs. C‚Äôest l√† que vous installerez vos syst√®mes invit√©s.|
|**Minimum free LVM space**|LVM (Logical Volume Manager) permet de g√©rer dynamiquement les partitions. Cet espace libre est utile pour les snapshots ou les modifications futures.|Garder `6 Go` libres pour pouvoir cr√©er des snapshots ou redimensionner les volumes plus tard.|

:::important[La petite histoire du SWAP]
Historiquement, le swap servait √† compenser un manque de m√©moire vive (RAM) en utilisant une portion du disque dur comme m√©moire temporaire. Cette technique permettait d‚Äô√©viter les plantages lorsque la RAM √©tait satur√©e. Cependant, avec les serveurs modernes √©quip√©s de grandes quantit√©s de RAM (souvent 16 Go, 32 Go ou plus), le swap est devenu moins essentiel. Il reste utile dans certains cas extr√™mes ou pour des op√©rations sp√©cifiques (comme l‚Äôhibernation ou certains traitements lourds), mais son usage est aujourd‚Äôhui marginal. Dans un environnement Proxmox bien dimensionn√©, le swap agit surtout comme filet de s√©curit√©, et ne devrait pas √™tre activement sollicit√©.
:::

**Voici donc la configuration √† mettre en place:**

![DisqueProxmox](../Assets/02/DiskProxmox.png)

#### √âtape 3

Configurez le fuseau horaire et votre clavier comme vous le feriez pour n'importe quel syst√®me.

![TimeZone](../Assets/02/TimeZone.png)

#### √âtape 4

D√©finissez le mot de passe du superutilisateur `root`. Pour le moment, vous pouvez utiliser le mot de passe `Passw0rd` car il ne s'agit que d'une premi√®re installation qu'on ne conservera pas √† long terme. Quant au courriel, inutile d'en mettre un vrai, Proxmox ne sera pas en mesure de communiquer avec celui-ci. Contentez-vous simplement de mettre quelque chose comme `courrier@exemple.com`.

![RootPass](../Assets/02/RootPass.png)

#### √âtape 5

La prochaine √©tape consiste √† configurer le r√©seau. Normalement, on pr√©voierait une IP statique (manuelle ou via le DHCP). Encore une fois, il ne s'agit que d'un premier exercice d'installation. Vous pouvez conserver l'adressage IP que vous avez obtenu via le DHCP.

![ConfReseau](../Assets/02/IpConf.png)

#### √âtape 6

Confirmez les param√®tres d'installation et lancez celle-ci!

![Confirm](../Assets/02/InstallConfirm.png)

Une fois que l'installation sera termin√©e, Proxmox red√©marrera et vous devriez finir par voir un √©cran semblable √† celui-ci:

![WelcomeProxmox](../Assets/02/WelcomeProxmox.png)

### Acc√®s √† l'interface

Une fois que votre hyperviseur Proxmox sera install√©, vous devrez utiliser un poste de travail standard pour acc√©der √† son interface web. Cr√©ez donc un poste de travail sous Windows 10 ou Windows 11 dans votre profil d'√©tudiant dans [labinfo](https://labinfo.cegepmontpetit.ca). <mark> Cette machine virtuelle doit √™tre reli√© au m√™me r√©seau que votre machine Proxmox. </mark>

Autrement dit, si vous avez branch√© Proxmox sur `Acc√®s Internet 2`, vous devez faire de m√™me pour votre poste de travail virtualis√©.

Une fois votre poste de travail en place, d√©marrez ce-dernier et entrez l'adresse IP de Proxmox, suivi du port 8006, dans la barre d'adresse du navigateur web. Vous atteindrez alors la console de gestion de Promox.

![ProxmoxWebGUI](../Assets/02/ProxmoxWebGUI.png)

Une fois que vous aurez entrez vos identifiants et ouvert une session, vous verrez apparaitre un petit message vous signalant que vous n'avez pas souscrit √† une licence officielle. <u>**Vous pouvez ignorer ce message.**</u> Les licences officielles de Proxmox permettent d'obtenir du support professionnelle. Elles sont surtout destin√©es aux entreprises qui souhaitent b√©n√©ficier d'un support imm√©diat en cas de probl√®me technique.

![NoValidSubscription](../Assets/02/NoValidSubscription.png)

√Ä partir d'ici, vous avez acc√®s √† l'enti√®ret√© du syst√®me. Explorez-le! Naviguez dans les menus, observez les diff√©rentes options et les param√®tres auxquels vous avez acc√®s.